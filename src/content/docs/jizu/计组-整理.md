---
title: 计算机组成原理-整理版
description: 计算机组成原理-整理版
---


## 一、计算机系统概述

### （一）计算机发展历程

1. **存储程序概念**：首次提出将数据和程序一起放在存储器中，使编程更方便，冯・诺依曼机结构至今仍被广泛应用，虽有改革但变化不大。
2. **ENIAC**：1946 年诞生于美国宾夕法尼亚大学，用大量电子管、继电器，占地大、耗电高，每秒计算 5000 次加法。
3. 发展阶段
   - 第一代（1946 - 50‘s 后期）：电子管计算机时代。
   - 第二代（50‘s 中期 - 60’s 后期）：晶体管计算机时代。
   - 第三代（60‘s 中期 - 70’s 前期）：集成电路计算机时代。
   - 第四代（70‘s 初 - ）：大规模集成电路计算机时代。

### （二）计算机系统层次结构

1. **硬件组成**：主要包括运算器、控制器、存储器、输入和输出五部分，CPU 是运算器和控制器的集成芯片。
2. 软件分类
   - 系统软件：管理计算机系统，分配资源，确保正常高效运行，面向系统。
   - 应用软件：根据用户特殊要求编制，实现用户某类要求，面向用户。
3. 工作过程
   - 执行指令过程：指令由操作码和操作数组成，按地址顺序存于存储器，通过程序计数器读取指令，经取指令、指令译码、指令执行阶段完成操作。

### （三）计算机性能指标

1. 吞吐量与响应时间
   - 吞吐量：单位时间内的数据输出数量。
   - 响应时间：从事件开始到结束的时间，也称执行时间。
2. CPU 时钟周期、主频、CPI、CPU 执行时间
   - CPU 时钟周期：机器主频的倒数，。
   - 主频：CPU 工作主时钟频率，。
   - CPI：执行一条指令所需平均时钟周期。
   - CPU 执行时间：（为执行程序中指令总数）。
3. MIPS、MFLOPS
   - MIPS：，适合评价标量机。
   - MFLOPS：（为程序中浮点数运算次数），适合衡量向量机性能。

## 二、数据的表示和运算

### （一）数制与编码

1. 进位计数制及其转换
   - 进位计数制：涉及基数和权，不同数制转换方法各异，如二进制、八进制、十六进制与十进制间的转换。
2. **真值和机器数**：真值正负号后跟绝对值表示，机器数中正负号数字化，有原码、补码和反码等表示法。
3. **BCD 码**：用 4 位二进制码对十进制数位编码，运算结果需修正。
4. **字符与字符串**：字符通过编码识别处理，常见编码有 ASCII 码、EBCDIC 码等，字符串存储有向量存储法和串表存储法。
5. 校验码
   - 奇偶校验码：增加校验位使码距为 2，有奇校验和偶校验。
   - 海明校验码：加入校验位，可指出错误位置，实现自动纠错。
   - CRC 校验码：通过多项式运算得到校验码，可判断数据是否出错。

### （二）定点数的表示和运算

1. 定点数表示
   - 无符号数：机器字长全用于表示数值大小。
   - 带符号数：最高位为符号位，有原码、补码和反码表示法。
2. 定点数运算
   - 位移运算：分算术移位和逻辑移位，算术移位带符号数移位，逻辑移位无符号数移位。
   - 原码定点数加 / 减运算：繁琐，需复杂硬件逻辑，实际少用。
   - 补码定点数加 / 减运算：无需符号判定，连同符号位一起运算。
   - 定点数乘 / 除运算：包括原码和补码的一位、两位乘法及除法运算，有多种算法。
   - 溢出概念与判别：运算结果超出表示范围为溢出，有多种判别方法。

### （三）浮点数的表示和运算

1. **浮点数表示**：，机内表示含符号位、阶码和尾数，有 IEEE754 标准规定的单精度和双精度格式。
2. **浮点数加 / 减运算**：经对阶、尾数加减、规格化、舍入、检查阶码溢出等步骤完成运算。

### （四）算术逻辑单元 ALU

1. 加法器
   - 串行进位加法器：逻辑电路简单，但运算速度慢。
   - 并行进位加法器：速度快，以增加硬件逻辑为代价，有单级先行进位和多级先行进位结构。
2. **ALU 功能与结构**：完成算术和逻辑运算，包含多种运算部件，通过指令要求执行操作，有通用寄存器组和重要状态寄存器。

## 三、存储器层次机构

### （一）存储器分类

1. **按存储介质分类**：半导体、磁表面、磁芯、光盘存储器。
2. **按存取方式分类**：随机、只读、串行访问存储器。
3. **按在计算机中的作用分类**。

### （二）存储器层次化结构

体现为缓存 - 主存 - 辅存存储层次，速度、容量和位价相互制约。

### （三）半导体随机存取存储器

1. **SRAM**：静态存储单元信息稳定，无需重写或刷新，但集成度低、功耗大。
2. **DRAM**：靠电容存储电荷，需定期刷新，集成度高、功耗低，广泛应用。

### （四）只读存储器

包括 ROM、PROM、EPROM、E2PROM 和 Flash Memory，掉电后内容不丢失，写入方式和特性各异。

### （五）主存储器与 CPU 的连接

需进行位扩展、字扩展或字位扩展，以满足存储容量需求。

### （六）双口 RAM 和多模块存储器

1. **双端口存储器**：有两个读 / 写端口，扩展信息交换能力。
2. **多模块存储器**：采用并行主存系统解决速度匹配问题，有多种工作方式。

### （七）高速缓冲存储器（Cache）

1. **程序访问局部性**：包括时间和空间局部性，是 Cache 工作原理的基础。
2. **基本工作原理**：由块表和快速存储器组成，处理机按地址访问，涉及定位和替换问题，对程序员透明。
3. **映射方式**：有直接映象、全相联映象和组相联映象，影响数据存储位置和替换策略。
4. **替换算法**：如随机算法、先进先出、近期最少使用法和优化替换算法，各有优缺点。
5. **写策略**：包括写回法和全写法，处理 Cache 与主存数据不一致问题，写不命中时有不同解决方法。

### （八）虚拟存储器

1. **基本概念**：是主存扩展，空间大小取决于访存能力，使存储系统兼具大容量和高速度，有段式、页式和段页式管理方式。
2. **页式虚拟存储器**：虚拟和实际空间分页，通过页表实现地址映射，由操作系统管理。
3. **段式虚拟存储器**：按段分配主存，通过段表指明段位置，段长可变化。
4. **段页式虚拟存储器**：结合段式和页式，访存通过段表和页表进行。
5. **TLB（快表）**：提高页表访问速度，实现虚实地址快速变换，存在透明性。

## 四、指令系统

### （一）指令格式

1. **基本格式**：包含操作码和地址码，操作码表示操作性质，地址码描述操作对象或地址。
2. 定长操作码指令格式
   - 零地址指令：无操作数或操作数默认，如空操作、堆栈运算指令。
   - 一地址指令：操作数地址与结果存储地址相同，如单操作数指令。
   - 二地址指令：常见格式，两个源操作数地址，一个为结果目的地址。
   - 三地址指令：两个源操作数地址和一个结果存储地址。
   - 多地址指令：用于处理成批数据，需多个地址描述数据信息。
3. **扩展操作码指令格式**：通过扩展操作码长度到地址码字段，实现更多指令安排。

### （二）指令的寻址方式

1. **有效地址概念**：操作数真实地址，由寻址方式和形式地址决定。
2. **寻址分类**：指令寻址（顺序和跳跃）和数据寻址，常见寻址方式有立即、直接、隐含、间接、寄存器、寄存器间接、基址、变址、相对、堆栈寻址等。

### （三）CISC 和 RISC 的基本概念

1. **CISC（复杂指令集计算机）**：指令系统复杂庞大，旨在提高操作系统效率、缩短与高级语言语义差别、实现程序兼容，但研制成本高、难实现流水线。
2. RISC（简单指令集计算机）
   - 产生：基于对 CISC 指令使用频率分析，提出简化指令集想法。
   - 特点：指令简单、长度固定，多数指令单周期完成，寄存器多，以硬布线控制逻辑为主，重视编译优化。
   - 发展：市场占有率不断提高，各大公司投入力量研发。
   - 特征对比：与 CISC 在指令系统、控制逻辑实现等多方面有明显差异。

## 五、中央处理器（CPU）

### （一）CPU 的功能和基本结构

1. 控制器功能
   - 取指令、分析指令、执行指令，循环执行直至停机或干预。
   - 控制程序和数据输入输出，处理异常和请求。
2. 控制器组成
   - 程序计数器（PC）：形成指令地址，可顺序或通过转移指令改变。
   - 指令寄存器（IR）：存放当前执行指令。
   - 指令译码器：分析操作码，产生控制信号。
   - 脉冲源及启停线路：提供时钟脉冲，控制时序信号发生。
   - 时序控制信号形成部件：根据指令产生时序控制信号，处理异常情况。

### （二）指令执行过程

1. **指令执行时序**：计算机工作时序按存储器工作周期划分，指令周期包含取指、分析、执行阶段，不同指令执行时间不同。
2. **指令执行过程举例**：以加法指令为例，说明取指、计算地址、取数、执行等周期的操作和控制信号。

### （三）数据通路的功能和基本结构

连接 CPU 内部及外部部件，传输数据和控制信号。

### （四）控制器的功能和工作原理

1. 硬布线控制器
   - 采用逻辑电路产生控制信号，需确定指令周期和操作控制信号逻辑表达式。
   - 涉及时序与节拍、操作码译码器和操作控制信号产生等方面。
2. 微程序控制器
   - 微程序、微指令和微命令：指令功能通过微指令序列实现，微指令由微操作组成，微程序是微指令序列集合。
   - 微指令编码方式：直接控制法、字段直接编译法、字段间接编译法。
   - 微地址形成方式：包括微程序入口地址和后继地址形成，有多种方式实现。

### （五）指令流水线

1. 基本概念
   - 原理：提高指令执行速度，指令重叠执行，细分解释过程，用多个子部件处理子过程。
   - 影响因素：结构、数据和控制相关影响流水线性能。
   - 性能指标：吞吐率、加速比和效率衡量流水线性能。
2. 超标量和动态流水线
   - 超标量：处理器可同时启动并独立执行多条普通操作指令，集成多条流水线结构。
   - 动态流水线：允许同一时间连接不同功能段子集完成不同运算，必为多功能流水线。

## 六、总线

### （一）总线概述

1. **基本概念**：连接部件的信息传输线，信息传输分串行和并行，有片内、系统和通信总线之分。
2. 总线分类
   - 片内总线：芯片内部总线。
   - 系统总线：连接计算机部件，包括数据、地址、控制总线，有不同结构。
   - 通信总线：用于计算机系统间或与其他系统通信，有串行和并行之分。
3. **总线组成与性能指标**：结构有单总线和多总线结构，性能指标包括宽度、带宽、同步方式、复用、信号线数、控制方式等。

### （二）总线仲裁

1. 集中仲裁方式
   - 链式查询：总线授权信号串行传递，优先响应离出发点最近的请求设备。
   - 计数器定时查询：通过计数确定响应设备，设备地址判别电路判断。
   - 独立请求方式：每个设备有独立请求和授权信号，由排队电路决定响应顺序。
2. **分布仲裁方式**：各主设备有仲裁号和电路，通过对比仲裁号确定总线使用权。

### （三）总线操作和定时

1. **总线操作**：包括读、写、块传送、写后读、读后写、广播和广集等操作。
2. 定时方式
   - 同步定时：所有模块由统一时钟脉冲控制，动作在时钟周期开始，多在一个周期内完成。
   - 异步定时：应答式或互锁机制定时，操作由特定信号确定，双方提供联络信号。

### （四）总线标准

1. **系统总线**：如 ISA、EISA、VESA、PCI、AGP 等标准，各有特点和应用范围。
2. **设备总线**：如 IDE、SCSI、RS - 232、USB 等标准，用于不同设备连接。

## 七、输入输出（I/O）系统

### （一）I/O 系统基本概念

发展经历多个阶段，从早期分散连接到具有通道结构和 I/O 处理机阶段。

### （二）外部设备

1. **输入设备**：键盘（按键开关组成，产生字符代码转换后送主机，有多种键型）和鼠标（机械式、光电式）。
2. 输出设备
   - 显示器：分类多样，包括按器件、显示内容和设备功能分类，有字符、图形、图像显示方式，工作原理各异。
   - 打印机：按印字原理和工作方式分类，有点阵式、激光、喷墨打印机等，各有特点。
3. 外存储器
   - 硬盘存储器：性能指标包括存储密度、容量、寻址时间、数据传输率、误码率等，有不同类型和磁道记录格式。
   - 磁盘阵列（RAID）：利用并行处理原理，有多种级别，提高数据传输带宽和可靠性。
   - 光盘存储器：利用激光束存储信息，有只读、写一次 / 多次读和可重写光盘，CD - ROM 光盘信息记录和扇区结构有特定方式。

### （三）I/O 接口（I/O 控制器）

1. 功能与结构
   - 功能：实现设备选择、数据缓冲、串并格式转换、电平转换、控制命令传送和设备状态反映。
   - 基本组成：包括相关寄存器和控制逻辑等。
2. **I/O 端口编址**：有专门 I/O 指令和利用访问存储器指令完成 I/O 功能两种编址方法。

### （四）I/O 方式

1. **程序查询方式**：CPU 不断查询 I/O 设备状态，效率低，设备准备好才执行 I/O 操作。
2. 程序中断方式
   - 基本概念：程序执行中遇异常或特殊情况，CPU 暂停当前程序转向处理，处理后返回断点继续执行。
   - 响应过程：中断源请求经排队后，CPU 接受最高级别请求，通过查询法或串行排队链法确定中断源，再转向中断服务程序入口。
   - 处理过程：包括关中断、保存断点和现场、判别中断源、开中断、执行服务程序、退出中断等步骤，可实现多重中断和中断屏蔽。
3. DMA 方式
   - DMA 控制器组成：含主存地址、外围设备地址、字数计数器、控制与状态、数据缓冲寄存器和中断机构。
   - 传送过程：预处理、数据交换（输入时涉及读入、请求、送数据、更新地址和计数、判断结束等操作）、后处理。
   - 工作方式：有 CPU 暂停、周期窃取、CPU 和 DMA 交替工作方式。
4. 通道方式
   - I/O 通道是独立部件，可执行通道命令，增强主机与外设并行能力，有字节多路、选择、数组多路通道三种类型，特点和适用设备不同