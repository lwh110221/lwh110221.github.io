---
title: 大纲提取-数据库系统
dcription: 数据库系统知识点笔记
---



## 数据库系统知识点笔记

## 一、数据库系统的基本概念、数据模型和系统结构
- **基本概念**：
    - 想象数据库就像一个巨大的仓库，专门用来存放各种数据。
    - 数据库管理系统（DBMS）就像是仓库的管理员，负责管理仓库里的数据，让我们可以方便地存取和操作数据。
    - 数据库系统（DBS）则是由仓库（数据库）、管理员（DBMS）、使用仓库的人（应用程序）以及管理整个系统的人（数据库管理员）共同组成的一个大系统。
- **数据模型**：
    - **概念模型**：可以把概念模型想象成我们用笔画出的一幅关于现实世界中事物的图画。比如用圆圈表示人，用方块表示物品，用线条表示他们之间的关系。这幅画不涉及具体的数据库管理系统和存储方式，只是一个抽象的描述。
    - **逻辑模型**：逻辑模型是在概念模型的基础上进一步细化，就像把那幅画变成了具体的建筑图纸。比如用关系模型表示时，就像一个表格，有行有列，行代表一个个具体的事物，列代表事物的各种属性。层次模型和网状模型则像不同形状的组织结构图。
    - **物理模型**：物理模型就是根据逻辑模型把数据库真正建造出来的样子。比如决定数据在磁盘上怎么存储，用什么方式索引能让我们更快地找到数据等。
- **系统结构**：
    - **数据库系统的三级模式结构**：
        - 外模式就像是我们从仓库的窗户看进去看到的景象，是我们用户看到的数据库的一部分视图。
        - 模式是整个仓库的布局和结构，是数据库的核心。
        - 内模式则是仓库内部的具体存储结构，比如货物怎么摆放，用什么架子等。
    - **数据库系统的两级映像**：
        - 外模式/模式映像就像一个滤镜，当仓库的布局（模式）发生变化时，这个滤镜可以让我们从窗户看到的景象（外模式）保持不变，保证了数据的逻辑独立性。
        - 模式/内模式映像就像一个保护罩，当仓库内部的存储结构（内模式）发生变化时，保护罩可以让仓库的布局（模式）保持不变，保证了数据的物理独立性。

## 二、关系数据库的结构及其定义
- **关系数据库的结构**：
    - **关系**：关系就是一张二维表，比如我们的课程表、成绩单等。表中的一行就是一个元组，相当于一个具体的记录，比如成绩单上某一门课的成绩记录。表中的一列就是一个属性，比如成绩单上的课程名称、成绩等。
    - **关系模式**：关系模式是对关系的描述，就像给一张表起个名字，然后说明每一列的名称和数据类型。比如“成绩单（课程名称，成绩类型）”。
    - **关系数据库**：关系数据库就是由很多这样的关系组成的，就像一个装满各种表格的文件柜。关系之间可以通过公共属性进行关联，比如通过学生的学号可以把学生信息表和成绩单联系起来。
- **关系数据库的定义**：
    - **关系的完整性约束**：
        - 实体完整性：可以想象每个元组就像一个有编号的盒子，实体完整性要求每个盒子的编号必须唯一且不能是空的。在关系数据库中，就是要求关系中的每个元组的主键值必须唯一且不能为空。
        - 参照完整性：如果一个关系中的某个属性是另一个关系的主键，那么这个属性的值就必须要么为空，要么等于另一个关系中主键的值。比如学生信息表中的班级编号，必须是班级表中存在的班级编号，否则就不合法。
        - 用户定义的完整性：这是用户根据自己的具体需求定义的一些规则，比如成绩不能为负数等。
    - **关系代数**：关系代数就像一个数学工具箱，里面有各种工具可以对关系进行操作。比如选择就像从一堆苹果中挑出红色的苹果；投影就像从一张照片中只截取一部分；连接就像把两张拼图拼在一起；除就像从一堆玩具中去掉不想要的玩具。
    - **关系演算**：关系演算是用逻辑方法来操作关系数据库的另一种方式。元组关系演算就像一个侦探，一个一个地检查元组是否满足条件；域关系演算就像一个数学家，用公式来描述关系中的数据。

## 三、关系数据库的标准语言
- **SQL 语言的特点**：
    - **综合统一**：SQL 语言就像一个多功能工具箱，里面有各种工具可以用来定义数据结构、操作数据、查询数据、控制数据等，非常方便。
    - **高度非过程化**：使用 SQL 语言就像给机器人下命令，我们只需要告诉它要做什么，而不需要告诉它怎么做。比如我们要查询成绩大于 90 分的学生，只需要写“SELECT * FROM students WHERE score > 90”，数据库管理系统会自动去执行这个查询操作。
    - **面向集合的操作方式**：SQL 语言一次可以处理多个元组，就像我们一次可以拿一堆苹果，而不是一个一个地拿。比如我们要查询所有男生的信息，就是对整个男生集合进行操作。
    - **以同一种语法结构提供多种使用方式**：SQL 语言既可以在终端上直接使用，就像我们在命令行里输入命令一样；也可以在其他编程语言中作为嵌入式语言使用，就像在一个大程序中调用一个小工具一样。
- **SQL 语言的基本语法**：
    - **数据定义语句**：CREATE 就像盖房子，用来创建数据库中的对象；ALTER 就像装修房子，用来修改数据库中的对象；DROP 就像拆房子，用来删除数据库中的对象。
    - **数据操纵语句**：INSERT 就像往箱子里放东西，用来插入数据；UPDATE 就像修改箱子里的东西，用来更新数据；DELETE 就像从箱子里拿出东西，用来删除数据；SELECT 就像从箱子里挑出我们想要的东西，用来查询数据。
    - **数据控制语句**：GRANT 就像给别人钥匙，允许他们访问数据库中的数据；REVOKE 就像收回钥匙，取消别人的访问权限；COMMIT 就像确认交易，把我们对数据的修改永久保存；ROLLBACK 就像撤销交易，把数据恢复到修改前的状态。

## 四、数据库的安全性和完整性
- **数据库的安全性**：
    - 数据库的安全性就像给仓库上一把锁，防止别人非法进入仓库偷东西或者破坏仓库里的东西。
    - 用户认证就像检查进入仓库的人的身份，只有合法的用户才能进入；访问控制就像给不同的人分配不同的权限，有的人可以进入仓库的某些区域，有的人则不能；数据加密就像给仓库里的贵重物品加上一层密码保护，即使被偷走了也打不开；审计就像在仓库里安装摄像头，记录下每个人的行为，以便出现问题时可以追查。
- **数据库的完整性**：
    - 数据库的完整性就像保证仓库里的东西都是完好无损的，没有坏的或者残缺的。
    - 实体完整性保证每个盒子都有唯一的编号且不能为空，就像仓库里的每个货物都有自己的标签且不能没有标签；参照完整性保证关系中的外键值是合法的，就像仓库里的货物摆放必须符合一定的规则；用户定义的完整性是用户根据自己的需求定义的一些特殊规则，就像仓库里的某些货物有特殊的存放要求。

## 五、数据库设计与数据库编程、数据库恢复技术
- **数据库设计**：
    - **数据库设计的步骤**：
        - 需求分析就像我们在盖房子之前要了解客户的需求，确定房子要盖多大，有几个房间等；概念结构设计就像画出房子的草图，用简单的图形表示出各个部分的关系；逻辑结构设计就像把草图变成详细的设计图，确定每个房间的具体布局和功能；物理结构设计就像根据设计图选择建筑材料和施工方法，确定数据库的存储结构和索引结构；数据库实施就像开始盖房子，把设计好的数据库在实际的数据库管理系统中实现；数据库运行与维护就像房子盖好后要进行日常的打扫和维修，保证数据库的正常运行。
    - **数据库设计的方法**：
        - 规范化设计方法就像整理房间，把东西摆放得井井有条，消除多余的东西，提高房间的使用效率和可维护性；面向对象设计方法就像把房间设计成一个个独立的小空间，每个空间都有自己的功能和特点，提高房间的可扩展性和可维护性；基于 UML 的设计方法就像用专业的设计软件来设计房间，让设计过程更加可视化和可理解。
- **数据库编程**：
    - **存储过程和函数**：存储过程和函数就像我们提前准备好的一些工具，放在仓库里，需要的时候可以直接拿出来用。比如我们可以定义一个计算学生平均成绩的函数，每次需要计算平均成绩的时候就可以直接调用这个函数，而不需要每次都重新写计算过程。
    - **触发器**：触发器就像一个自动报警器，当仓库里发生特定的事件时，它会自动触发并执行一些操作。比如当学生的成绩被修改时，触发器可以自动记录下修改的时间和修改的人。
    - **游标**：游标就像一个放大镜，我们可以用它来逐行地查看和处理数据库中的数据。比如我们要对成绩表中的每一行数据进行一些特殊的处理，就可以使用游标来一行一行地读取数据并进行处理。
- **数据库恢复技术**：
    - 数据库恢复就像在仓库发生火灾后，把仓库恢复到火灾前的状态。
    - 备份和恢复就像我们提前把仓库里的东西复制一份存放在其他地方，当仓库发生故障时，从备份中恢复数据；日志和恢复就像我们记录下仓库里的每一个操作，当仓库发生故障时，根据日志中的记录恢复数据；镜像和恢复就像我们把仓库里的东西同时存放在多个地方，当其中一个地方发生故障时，从其他地方恢复数据。